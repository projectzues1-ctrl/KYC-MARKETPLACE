import{u as m,a as o,j as e,S as x,L as u,f as i}from"./index-B6hPo9fH.js";import{u as h}from"./useMutation-C_3TpXjp.js";import{L as p,W as j}from"./Layout-BTVfT1Q4.js";import{C as g,b as f,c as N,a as y}from"./card-Cl1MO1GN.js";import{B as l}from"./button-DdYfvWb9.js";import{B as b}from"./badge-Dn4EaI7W.js";import{u as w}from"./useTranslation-O3_Fa0eH.js";import{B as t,S as v}from"./shopping-cart-DT7LSJeM.js";import{C}from"./clock-BbwHj01_.js";import{C as k}from"./ThemeToggle-Cd9vwdUm.js";import{C as S}from"./circle-check-big-BkJjytOF.js";import{T as B}from"./triangle-alert-DGpOeCBb.js";import{S as L}from"./shield-DVigj7cn.js";import"./index-Dt-oTuiC.js";function V(){const{t:R}=w(),r=m(),{data:a,isLoading:d}=o({queryKey:["notifications"],queryFn:async()=>(await i("/api/notifications")).json()}),n=h({mutationFn:async s=>(await i(`/api/notifications/${s}/read`,{method:"PATCH"})).json(),onSuccess:()=>{r.invalidateQueries({queryKey:["notifications"]}),r.invalidateQueries({queryKey:["notifications","unread"]})}}),c=s=>{switch(s){case"order":return e.jsx(v,{className:"h-5 w-5 text-blue-400"});case"payment":case"wallet":return e.jsx(j,{className:"h-5 w-5 text-green-400"});case"escrow":return e.jsx(L,{className:"h-5 w-5 text-purple-400"});case"dispute":return e.jsx(B,{className:"h-5 w-5 text-orange-400"});case"kyc":return e.jsx(S,{className:"h-5 w-5 text-green-400"});default:return e.jsx(t,{className:"h-5 w-5 text-gray-400"})}};return e.jsx(p,{children:e.jsxs("div",{className:"space-y-4 sm:space-y-6 px-2 sm:px-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground truncate",children:"Notifications"}),a&&a.some(s=>!s.isRead)&&e.jsxs(b,{className:"bg-primary",children:[a.filter(s=>!s.isRead).length," unread"]})]}),e.jsxs(g,{className:"bg-card border-border",children:[e.jsx(f,{children:e.jsxs(N,{className:"text-foreground flex items-center gap-2",children:[e.jsx(t,{className:"h-5 w-5"}),"All Notifications"]})}),e.jsx(y,{children:d?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx(x,{className:"h-20 bg-muted"},s))}):a&&a.length>0?e.jsx("div",{className:"space-y-3",children:a.map(s=>e.jsx("div",{className:`p-4 rounded-lg border transition-colors ${s.isRead?"bg-muted/50 border-border":"bg-muted/80 border-primary/50"}`,"data-testid":`notification-${s.id}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-muted",children:c(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-foreground font-medium",children:s.title}),!s.isRead&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})]}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:s.message}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(C,{className:"h-3 w-3 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[new Date(s.createdAt).toLocaleDateString()," at"," ",new Date(s.createdAt).toLocaleTimeString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.link&&e.jsx(u,{href:s.link,children:e.jsx(l,{variant:"outline",size:"sm",children:"View"})}),!s.isRead&&e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>n.mutate(s.id),"data-testid":`button-mark-read-${s.id}`,children:e.jsx(k,{className:"h-4 w-4"})})]})]})},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(t,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-foreground",children:"No notifications yet"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"You'll see updates about your orders here"})]})})]})]})})}export{V as default};
