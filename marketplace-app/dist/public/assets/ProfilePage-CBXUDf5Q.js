import{b as S,g as q,r as j,a as c,j as e,S as b,f as i}from"./index-B6hPo9fH.js";import{C as d,a as l,b as U,c as $}from"./card-Cl1MO1GN.js";import{B as x}from"./badge-Dn4EaI7W.js";import{T as F,a as B,b as f,c as h}from"./tabs-YN5y1_yR.js";import{T as E,S as N}from"./ThemeToggle-Cd9vwdUm.js";import{u as L}from"./useTranslation-O3_Fa0eH.js";import{C as v}from"./chevron-left-DsaiS75a.js";import{U as K}from"./index-Dt-oTuiC.js";import{S as y}from"./star-CUTTDGaz.js";import{C as w}from"./circle-check-big-BkJjytOF.js";import{T as k}from"./thumbs-up-CkiQKVSZ.js";import{M as T}from"./message-square-CcAE1XrF.js";import{E as C}from"./eye-DoMSfCwj.js";import"./button-DdYfvWb9.js";function re(){const{t:V}=L();S();const p=new URLSearchParams(window.location.search);let r=p.get("id");const o=q(),[D,A]=j.useState(!1);!r&&o?.id&&(r=o.id),j.useEffect(()=>{A(r===o?.id||!p.get("id"))},[r,o?.id]);const{data:t,isLoading:P}=c({queryKey:["user-profile",r],queryFn:async()=>{if(!r)return null;const s=await i(`/api/users/${r}/profile`);if(!s.ok)throw new Error("Failed to fetch profile");return s.json()},enabled:!!r}),{data:n,isLoading:I}=c({queryKey:["user-trades",r],queryFn:async()=>{if(!r)return null;const s=await i(`/api/users/${r}/trades`);if(!s.ok)throw new Error("Failed to fetch trades");return s.json()},enabled:!!r}),{data:m}=c({queryKey:["user-feedback",r],queryFn:async()=>{if(!r)return[];const s=await i(`/api/users/${r}/feedback`);return s.ok?s.json():[]},enabled:!!r}),{data:u}=c({queryKey:["user-active-ads",r],queryFn:async()=>{if(!r)return[];const s=await i(`/api/users/${r}/active-ads`);return s.ok?s.json():[]},enabled:!!r}),{data:a}=c({queryKey:["vendor-profile",r],queryFn:async()=>{if(!r)return null;const s=await i(`/api/vendors/${r}/profile`);return s.ok?s.json():null},enabled:!!r});return r?P?e.jsxs("div",{className:"min-h-screen bg-background p-4",children:[e.jsx(b,{className:"h-32 bg-muted mb-4"}),e.jsx(b,{className:"h-64 bg-muted"})]}):e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-background border-b border-border",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-2 sm:px-4 py-3 flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 min-w-0",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"p-1 flex-shrink-0","data-testid":"button-back",children:e.jsx(v,{className:"h-5 sm:h-6 w-5 sm:w-6 text-foreground"})}),e.jsx("h1",{className:"text-base sm:text-lg font-semibold text-foreground truncate",children:"User Profile"})]}),e.jsx(E,{})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto px-2 sm:px-4 py-6 space-y-4 sm:space-y-6",children:[t&&e.jsx(d,{className:"bg-card border-border",children:e.jsx(l,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:t.profilePicture?e.jsx("img",{src:t.profilePicture,alt:t.username,className:"w-full h-full rounded-full object-cover"}):e.jsx(K,{className:"h-10 w-10 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground truncate",children:t.username}),t.hasVerifyBadge&&e.jsxs(x,{className:"bg-yellow-600 flex items-center gap-1 flex-shrink-0",children:[e.jsx(y,{className:"h-3 w-3"}),"Verified"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Joined ",new Date(t.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"hidden sm:flex flex-col gap-2 items-end",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(w,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Email"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(w,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-muted-foreground",children:"KYC"})]})]})]})})}),n&&e.jsx(d,{className:"bg-card border-border",children:e.jsxs(l,{className:"pt-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border-r border-border pr-4",children:[e.jsx("p",{className:"text-3xl font-bold text-foreground",children:n.totalTrades}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total Trades"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-3xl font-bold text-foreground",children:[n.completionRate,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Completion Rate"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 border-t border-border pt-4",children:[e.jsxs("div",{className:"border-r border-border pr-4",children:[e.jsxs("p",{className:"text-xl font-bold text-foreground",children:["$",n.totalTradeVolume||"0"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Trade Volume (USDT)"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-foreground",children:n.avgPayTime||"â€”"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Avg. Pay Time"})]})]})]})}),a&&e.jsxs(d,{className:"bg-card border-border",children:[e.jsx(U,{children:e.jsxs($,{className:"flex items-center gap-2 text-base",children:[e.jsx(N,{className:"h-5 w-5"}),"Vendor Information"]})}),e.jsxs(l,{className:"space-y-3",children:[a.businessName&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Business Name"}),e.jsx("p",{className:"text-foreground font-medium",children:a.businessName})]}),a.bio&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bio"}),e.jsx("p",{className:"text-foreground text-sm",children:a.bio})]}),a.country&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Country"}),e.jsx("p",{className:"text-foreground",children:a.country})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Status"}),e.jsx(x,{className:a.isApproved?"bg-green-600 text-white":"bg-yellow-600 text-white",children:a.isApproved?"Approved":"Pending"})]})]})]}),e.jsxs(F,{defaultValue:"trades",className:"w-full",children:[e.jsxs(B,{className:"grid w-full grid-cols-3 bg-transparent border-b border-border rounded-none",children:[e.jsxs(f,{value:"trades","data-testid":"tab-trades",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-foreground",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Trade"]}),e.jsxs(f,{value:"feedback","data-testid":"tab-feedback",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-foreground",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Feedback"]}),e.jsxs(f,{value:"others",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-foreground",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Others"]})]}),e.jsx(h,{value:"trades",className:"space-y-4",children:u&&u.length>0?u.map(s=>e.jsx(d,{className:"bg-card border-border","data-testid":`ad-card-${s.id}`,children:e.jsx(l,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(x,{className:"mb-2",children:s.type}),e.jsxs("p",{className:"font-bold text-foreground text-lg",children:["$",s.pricePerUnit]}),s.currency&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.currency," account"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Available: ",s.availableAmount," account",parseInt(s.availableAmount)!==1?"s":""]})]}),e.jsx(x,{className:s.isActive?"bg-green-600":"bg-gray-600",children:s.isActive?"Active":"Inactive"})]})})},s.id)):e.jsx(d,{className:"bg-card border-border",children:e.jsxs(l,{className:"py-12 text-center",children:[e.jsx(N,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No active ads"})]})})}),e.jsxs(h,{value:"feedback",className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-card border border-border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5 text-foreground"}),e.jsx("span",{className:"font-medium text-foreground",children:"Received Feedback"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-foreground font-bold",children:m?.length||0}),e.jsx(v,{className:"h-4 w-4 text-muted-foreground rotate-180"})]})]})}),m&&m.length>0?e.jsx("div",{className:"space-y-3",children:m.map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-card border border-border rounded-lg","data-testid":`feedback-card-${s.id}`,children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex-shrink-0 flex items-center justify-center text-white text-sm font-bold",children:s.createdBy[0].toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:s.createdBy}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex items-center gap-0.5",children:[...Array(5)].map((R,g)=>e.jsx(y,{className:`h-3 w-3 ${g<s.rating?"text-yellow-400 fill-yellow-400":"text-gray-600"}`},g))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2 line-clamp-2",children:s.comment})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(T,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No feedback yet"})]})]}),e.jsx(h,{value:"others",className:"space-y-3",children:e.jsx("div",{className:"space-y-4",children:e.jsx(d,{className:"bg-card border-border",children:e.jsxs(l,{className:"py-12 text-center",children:[e.jsx(C,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Additional features coming soon"})]})})})})]})]})]}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-foreground",children:"Profile not found"})})})}export{re as default};
